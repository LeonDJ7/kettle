version: '3.8'

services:
  mysql-development:
    image: mysql:8.0.17
    environment:
      MYSQL_ROOT_PASSWORD: samsam98
      MYSQL_DATABASE: items
    ports:
      - "3308:3308"
    volumes:
      - "./config/my.conf:/etc/mysql/conf.d/config-file.cnf"
      - "./data:/var/lib/mysql:rw"
  auth:
    build: auth/.
    ports:
      - "4000:4000"
    depends_on:
    - "auth-db"
  event-bus:
    build: event-bus/.
    ports:
      - "4001:4001"
  items:
    build: items/.
    ports:
      - "4002:4002"
    depends_on:
    - "items-db"
  moderation:
    build: moderation/.
    ports:
      - "4004:4004"
    depends_on:
      - "moderation-db"
  moderation-db:
    build: moderation_db/.
    ports:
      - "4006:4006"
  items-db:
    build: items_db/.
    ports:
      - "4007:4007"
    depends_on:
      - mysql-development
  auth-db:
    build: auth_db/.
    ports:
      - "4008:4008"
